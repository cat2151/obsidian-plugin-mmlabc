!function(r,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e=t();for(var n in e)("object"==typeof exports?exports:r)[n]=e[n]}}(self,(()=>(()=>{"use strict";var r={699:r=>{function t(r){switch(r){case"ionian":return[0,2,4,5,7,9,11];case"dorian":return[0,2,3,5,7,9,10];case"phrygian":return[0,1,3,5,7,8,10];case"lydian":return[0,2,4,6,7,9,11];case"mixolydian":return[0,2,4,5,7,9,10];case"aeolian":return[0,2,3,5,7,8,10];case"locrian":return[0,1,3,5,6,8,10];default:throw new Error("ERROR : getOffsetsByScale")}}function e(r,t,e){let n;switch(r){case"C":n=0;break;case"D":n=2;break;case"E":n=4;break;case"F":n=5;break;case"G":n=7;break;case"A":n=9;break;case"B":n=11;break;default:throw new Error("ERROR : getRootCdefgabOffset")}return n+=t.length-e.length,n}function n(r,t,e,o){var s=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(s,n.prototype),s.expected=t,s.found=e,s.location=o,s.name="SyntaxError",s}function o(r,t,e){return e=e||" ",r.length>t?r:(t-=r.length,r+(e+=e.repeat(t)).slice(0,t))}!function(r,t){function e(){this.constructor=r}e.prototype=t.prototype,r.prototype=new e}(n,Error),n.prototype.format=function(r){var t="Error: "+this.message;if(this.location){var e,n=null;for(e=0;e<r.length;e++)if(r[e].source===this.location.source){n=r[e].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,a=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(s):s,u=this.location.source+":"+a.line+":"+a.column;if(n){var c=this.location.end,i=o("",a.line.toString().length," "),f=n[s.line-1],l=(s.line===c.line?c.column:f.length+1)-s.column||1;t+="\n --\x3e "+u+"\n"+i+" |\n"+a.line+" | "+f+"\n"+i+" | "+o("",s.column-1," ")+o("",l,"^")}else t+="\n at "+u}return t},n.buildMessage=function(r,t){var e={literal:function(r){return'"'+o(r.text)+'"'},class:function(r){var t=r.parts.map((function(r){return Array.isArray(r)?s(r[0])+"-"+s(r[1]):s(r)}));return"["+(r.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(r){return r.description}};function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}function o(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}function s(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}function a(r){return e[r.type](r)}return"Expected "+function(r){var t,e,n=r.map(a);if(n.sort(),n.length>0){for(t=1,e=1;t<n.length;t++)n[t-1]!==n[t]&&(n[e]=n[t],e++);n.length=e}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(r)+" but "+function(r){return r?'"'+o(r)+'"':"end of input"}(t)+" found."},r.exports={SyntaxError:n,parse:function(r,o){var s,a={},u=(o=void 0!==o?o:{}).grammarSource,c={CHORDS:Mo},i=Mo,f="/",l="on",h="over",b="chord over bass note",v="slash chord inversion",p="upper structure triad",d="upper structure",g="ust",m="us",A="polychord",w="poly",y="/*",C="*/",k="root inv",L="1st inv",O="2nd inv",I="3rd inv",R="close harmony",x="close",E="drop2",S="drop-2",j="open triad",V="drop4",F="drop-4",Q="drop2and4",M="drop-2-and-4",N="no bass",P="bass is root",q="bass plays root",B="bass play root",D="bpm",J="tempo",T="|",G=" / ",U="key",K="ionian",_="dorian",H="phrygian",z="lydian",W="mixolydian",X="aeolian",Y="locrian",Z="octave",$="up",rr="down",tr="VII",er="III",nr="VI",or="IV",sr="II",ar="V",ur="I",cr="maj",ir="M",fr="maj7",lr="M7",hr="△",br="min",vr="m",pr="-",dr="min7",gr="m7",mr="-7",Ar="6",wr="7",yr="9",Cr="11",kr="13",Lr="sus2",Or="sus4",Ir="7sus2",Rr="7sus4",xr="dim",Er="aug",Sr="(b5)",jr="(-5)",Vr="(+5)",Fr="(#5)",Qr="(",Mr="omit",Nr="o",Pr=")",qr="add",Br="^",Dr="'",Jr=",",Tr=" - ",Gr="→",Ur="Strings",Kr="Ensemble",_r="1",Hr="Str.",zr="2",Wr="voice aahs",Xr="choir aahs",Yr="choir",Zr="chor.",$r=/^[,.]/,rt=/^[^*\/]/,tt=/^[0-9]/,et=/^[ =]/,nt=/^[A-G]/,ot=/^[ \-]/,st=/^[#\uFF03\u266F]/,at=/^[b\u266D]/,ut=/^[135]/,ct=/^[0-3]/,it=/^[ \t\n\r]/,ft=Eo("/",!1),lt=Eo("on",!1),ht=Eo("over",!1),bt=Eo("chord over bass note",!0),vt=So([",","."],!1,!1),pt=Eo("slash chord inversion",!0),dt=Eo("upper structure triad",!0),gt=Eo("upper structure",!0),mt=Eo("UST",!0),At=Eo("US",!0),wt=Eo("polychord",!0),yt=Eo("poly",!0),Ct=Eo("/*",!1),kt=So(["*","/"],!0,!1),Lt=Eo("*/",!1),Ot=Eo("root inv",!0),It=Eo("1st inv",!0),Rt=Eo("2nd inv",!0),xt=Eo("3rd inv",!0),Et=Eo("close harmony",!0),St=Eo("close",!0),jt=Eo("drop2",!0),Vt=Eo("drop-2",!0),Ft=Eo("open triad",!0),Qt=Eo("drop4",!0),Mt=Eo("drop-4",!0),Nt=Eo("drop2and4",!0),Pt=Eo("drop-2-and-4",!0),qt=Eo("no bass",!0),Bt=Eo("bass is root",!0),Dt=Eo("bass plays root",!0),Jt=Eo("bass play root",!0),Tt=Eo("BPM",!0),Gt=Eo("TEMPO",!0),Ut=So([["0","9"]],!1,!1),Kt=Eo("|",!1),_t=Eo(" / ",!1),Ht=Eo("key",!0),zt=So([" ","="],!1,!1),Wt=So([["A","G"]],!1,!1),Xt=Eo("ionian",!0),Yt=Eo("dorian",!0),Zt=Eo("phrygian",!0),$t=Eo("lydian",!0),re=Eo("mixolydian",!0),te=Eo("aeolian",!0),ee=Eo("locrian",!0),ne=Eo("octave",!0),oe=So([" ","-"],!1,!1),se=Eo("up",!0),ae=Eo("down",!0),ue=Eo("VII",!1),ce=Eo("III",!1),ie=Eo("VI",!1),fe=Eo("IV",!1),le=Eo("II",!1),he=Eo("V",!1),be=Eo("I",!1),ve=So(["#","＃","♯"],!1,!1),pe=So(["b","♭"],!1,!1),de=Eo("maj",!0),ge=Eo("M",!1),me=Eo("maj7",!0),Ae=Eo("M7",!1),we=Eo("△",!1),ye=Eo("min",!0),Ce=Eo("m",!1),ke=Eo("-",!1),Le=Eo("min7",!0),Oe=Eo("m7",!1),Ie=Eo("-7",!1),Re=Eo("6",!1),xe=Eo("7",!1),Ee=Eo("9",!1),Se=Eo("11",!1),je=Eo("13",!1),Ve=Eo("sus2",!1),Fe=Eo("sus4",!1),Qe=Eo("7sus2",!1),Me=Eo("7sus4",!1),Ne=Eo("dim",!1),Pe=Eo("aug",!1),qe=Eo("(b5)",!1),Be=Eo("(-5)",!1),De=Eo("(+5)",!1),Je=Eo("(#5)",!1),Te=Eo("(",!1),Ge=Eo("omit",!1),Ue=Eo("o",!1),Ke=So(["1","3","5"],!1,!1),_e=Eo(")",!1),He=Eo("add",!1),ze=Eo("^",!1),We=So([["0","3"]],!1,!1),Xe=Eo("'",!1),Ye=Eo(",",!1),Ze=jo("whitespace"),$e=So([" ","\t","\n","\r"],!1,!1),rn=jo("hyphen"),tn=Eo(" - ",!1),en=Eo("→",!1),nn=Eo("Strings",!1),on=Eo("Ensemble",!1),sn=Eo("1",!0),an=Eo("1",!1),un=Eo("Str.",!1),cn=Eo("2",!0),fn=Eo("2",!1),ln=Eo("Voice Aahs",!0),hn=Eo("Choir Aahs",!0),bn=Eo("Choir",!0),vn=Eo("Chor.",!0),pn=function(r){return r},dn=function(r,t,e,n){return{event:"chord",root:r,quality:t,inversion:e,octaveOffset:n}},gn=function(r,t,e,n,o,s,a,u){return o??=r,s??=t,{event:"slash chord",upperRoot:r,upperQuality:t,upperInversion:e,upperOctaveOffset:n,lowerRoot:o,lowerQuality:s,lowerInversion:a,lowerOctaveOffset:u}},mn=function(r,t,e,n,o,s,a,u){return o??=r,s??=t,{event:"chord over bass note",upperRoot:r,upperQuality:t,upperInversion:e,upperOctaveOffset:n,lowerRoot:o,lowerQuality:s,lowerInversion:a,lowerOctaveOffset:u}},An=function(){return{event:"change slash chord mode to chord over bass note"}},wn=function(){return{event:"change slash chord mode to inversion"}},yn=function(){return{event:"change slash chord mode to polychord"}},Cn=function(r){return{event:"inline mml",mml:r.join("")}},kn=function(){return{event:"change inversion mode to root inv"}},Ln=function(){return{event:"change inversion mode to 1st inv"}},On=function(){return{event:"change inversion mode to 2nd inv"}},In=function(){return{event:"change inversion mode to 3rd inv"}},Rn=function(){return{event:"change open harmony mode to close"}},xn=function(){return{event:"change open harmony mode to drop2"}},En=function(){return{event:"change open harmony mode to drop4"}},Sn=function(){return{event:"change open harmony mode to drop2and4"}},jn=function(){return{event:"change bass play mode to no bass"}},Vn=function(){return{event:"change bass play mode to root"}},Fn=function(r){return{event:"inline mml",mml:"t"+r.join("")}},Qn=function(){return{event:"bar"}},Mn=function(){return{event:"bar slash"}},Nn=function(r){return r},Pn=function(r,t,n){return Wo=e(r,t,n),{event:"key",root:r,sharpLength:t.length,flatLength:n.length,offset:Wo}},qn=function(r){return Xo=r.toLowerCase(),{event:"scale",offsets:t(Xo)}},Bn=function(){return{event:"octave up"}},Dn=function(){return{event:"octave up upper"}},Jn=function(){return{event:"octave up lower"}},Tn=function(){return{event:"octave down"}},Gn=function(){return{event:"octave down upper"}},Un=function(){return{event:"octave down lower"}},Kn=function(r,t,n){return e(r,t,n)},_n=function(r,e,n){let o=function(r,e){return t(r)[function(r){switch(r){case"I":return 0;case"II":return 1;case"III":return 2;case"IV":return 3;case"V":return 4;case"VI":return 5;case"VII":return 6;default:throw new Error("ERROR : getDegreeIndex")}}(e)]}(Xo,n);return o+=r.length-e.length+Wo,o},Hn=function(){return"#"},zn=function(){return"b"},Wn=function(r){return r.join("")},Xn=function(){return"maj"},Yn=function(){return"maj"},Zn=function(){return"maj7"},$n=function(){return"min"},ro=function(){return"min"},to=function(){return"min7"},eo=function(){return"6"},no=function(){return"7"},oo=function(){return"9"},so=function(){return"11"},ao=function(){return"13"},uo=function(){return"sus2"},co=function(){return"sus4"},io=function(){return"7sus2"},fo=function(){return"7sus4"},lo=function(){return"dim triad"},ho=function(){return"aug"},bo=function(){return",flatted fifth"},vo=function(){return",augmented fifth"},po=function(r){return",omit"+r},go=function(r){return",add"+r.join("")},mo=function(){switch(r.substring(Lo,ko)){case"":return null;case"^0":return"root inv";case"^1":return"1st inv";case"^2":return"2nd inv";case"^3":return"3rd inv";default:throw new Error("ERROR : INVERSION")}},Ao=function(r,t){return r.length-t.length},wo=function(){return{event:"inline mml",mml:"@48"}},yo=function(){return{event:"inline mml",mml:"@49"}},Co=function(){return{event:"inline mml",mml:"@52"}},ko=0,Lo=0,Oo=[{line:1,column:1}],Io=0,Ro=[],xo=0;if("startRule"in o){if(!(o.startRule in c))throw new Error("Can't start parsing from rule \""+o.startRule+'".');i=c[o.startRule]}function Eo(r,t){return{type:"literal",text:r,ignoreCase:t}}function So(r,t,e){return{type:"class",parts:r,inverted:t,ignoreCase:e}}function jo(r){return{type:"other",description:r}}function Vo(t){var e,n=Oo[t];if(n)return n;for(e=t-1;!Oo[e];)e--;for(n={line:(n=Oo[e]).line,column:n.column};e<t;)10===r.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return Oo[t]=n,n}function Fo(r,t,e){var n=Vo(r),o=Vo(t),s={source:u,start:{offset:r,line:n.line,column:n.column},end:{offset:t,line:o.line,column:o.column}};return e&&u&&"function"==typeof u.offset&&(s.start=u.offset(s.start),s.end=u.offset(s.end)),s}function Qo(r){ko<Io||(ko>Io&&(Io=ko,Ro=[]),Ro.push(r))}function Mo(){var r,t,e;for(r=ko,t=[],e=No();e!==a;)t.push(e),e=No();return e=Ho(),Lo=r,pn(t)}function No(){var t;return(t=function(){var t,e,n,o;if(t=ko,r.substr(ko,2)===y?(e=y,ko+=2):(e=a,0===xo&&Qo(Ct)),e!==a){if(n=[],rt.test(r.charAt(ko))?(o=r.charAt(ko),ko++):(o=a,0===xo&&Qo(kt)),o!==a)for(;o!==a;)n.push(o),rt.test(r.charAt(ko))?(o=r.charAt(ko),ko++):(o=a,0===xo&&Qo(kt));else n=a;n!==a?(r.substr(ko,2)===C?(o=C,ko+=2):(o=a,0===xo&&Qo(Lt)),o!==a?(Lo=t,t=Cn(n)):(ko=t,t=a)):(ko=t,t=a)}else ko=t,t=a;return t}())===a&&(t=function(){var t,e;return t=ko,r.substr(ko,3)===G?(e=G,ko+=3):(e=a,0===xo&&Qo(_t)),e!==a?(Ho(),Lo=t,t=Mn()):(ko=t,t=a),t}())===a&&(t=function(){var t;return(t=function(){var t,e,n,o,s,u,c;return t=ko,Ho(),e=ko,r.substr(ko,7)===Ur?(n=Ur,ko+=7):(n=a,0===xo&&Qo(nn)),n!==a?(o=Ho(),r.substr(ko,8)===Kr?(s=Kr,ko+=8):(s=a,0===xo&&Qo(on)),s!==a?(u=Ho(),r.substr(ko,1).toLowerCase()===_r?(c=r.charAt(ko),ko++):(c=a,0===xo&&Qo(sn)),c!==a?e=n=[n,o,s,u,c]:(ko=e,e=a)):(ko=e,e=a)):(ko=e,e=a),e===a&&(e=ko,r.substr(ko,7)===Ur?(n=Ur,ko+=7):(n=a,0===xo&&Qo(nn)),n!==a?(o=Ho(),49===r.charCodeAt(ko)?(s=_r,ko++):(s=a,0===xo&&Qo(an)),s!==a?e=n=[n,o,s]:(ko=e,e=a)):(ko=e,e=a),e===a&&(e=ko,r.substr(ko,4)===Hr?(n=Hr,ko+=4):(n=a,0===xo&&Qo(un)),n!==a?(o=Ho(),49===r.charCodeAt(ko)?(s=_r,ko++):(s=a,0===xo&&Qo(an)),s!==a?e=n=[n,o,s]:(ko=e,e=a)):(ko=e,e=a))),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),o=Ho(),Lo=t,t=wo()):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s,u,c;return t=ko,Ho(),e=ko,r.substr(ko,7)===Ur?(n=Ur,ko+=7):(n=a,0===xo&&Qo(nn)),n!==a?(o=Ho(),r.substr(ko,8)===Kr?(s=Kr,ko+=8):(s=a,0===xo&&Qo(on)),s!==a?(u=Ho(),r.substr(ko,1).toLowerCase()===zr?(c=r.charAt(ko),ko++):(c=a,0===xo&&Qo(cn)),c!==a?e=n=[n,o,s,u,c]:(ko=e,e=a)):(ko=e,e=a)):(ko=e,e=a),e===a&&(e=ko,r.substr(ko,7)===Ur?(n=Ur,ko+=7):(n=a,0===xo&&Qo(nn)),n!==a?(o=Ho(),50===r.charCodeAt(ko)?(s=zr,ko++):(s=a,0===xo&&Qo(fn)),s!==a?e=n=[n,o,s]:(ko=e,e=a)):(ko=e,e=a),e===a&&(e=ko,r.substr(ko,4)===Hr?(n=Hr,ko+=4):(n=a,0===xo&&Qo(un)),n!==a?(o=Ho(),50===r.charCodeAt(ko)?(s=zr,ko++):(s=a,0===xo&&Qo(fn)),s!==a?e=n=[n,o,s]:(ko=e,e=a)):(ko=e,e=a))),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),o=Ho(),Lo=t,t=yo()):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=ko,Ho(),r.substr(ko,10).toLowerCase()===Wr?(e=r.substr(ko,10),ko+=10):(e=a,0===xo&&Qo(ln)),e===a&&(r.substr(ko,10).toLowerCase()===Xr?(e=r.substr(ko,10),ko+=10):(e=a,0===xo&&Qo(hn)),e===a&&(r.substr(ko,5).toLowerCase()===Yr?(e=r.substr(ko,5),ko+=5):(e=a,0===xo&&Qo(bn)),e===a&&(r.substr(ko,5).toLowerCase()===Zr?(e=r.substr(ko,5),ko+=5):(e=a,0===xo&&Qo(vn))))),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),Ho(),Lo=t,t=Co()):(ko=t,t=a),t}()),t}())===a&&(t=function(){var t,e,n,o;if(t=ko,Ho(),r.substr(ko,3).toLowerCase()===D?(e=r.substr(ko,3),ko+=3):(e=a,0===xo&&Qo(Tt)),e===a&&(r.substr(ko,5).toLowerCase()===J?(e=r.substr(ko,5),ko+=5):(e=a,0===xo&&Qo(Gt))),e!==a){if(Ho(),n=[],tt.test(r.charAt(ko))?(o=r.charAt(ko),ko++):(o=a,0===xo&&Qo(Ut)),o!==a)for(;o!==a;)n.push(o),tt.test(r.charAt(ko))?(o=r.charAt(ko),ko++):(o=a,0===xo&&Qo(Ut));else n=a;n!==a?($r.test(r.charAt(ko))?(o=r.charAt(ko),ko++):(o=a,0===xo&&Qo(vt)),o===a&&(o=null),Ho(),Lo=t,t=Fn(n)):(ko=t,t=a)}else ko=t,t=a;return t}())===a&&(t=function(){var t,e,n,o,s;return t=ko,Ho(),e=ko,r.substr(ko,6).toLowerCase()===Z?(n=r.substr(ko,6),ko+=6):(n=a,0===xo&&Qo(ne)),n!==a?(ot.test(r.charAt(ko))?(o=r.charAt(ko),ko++):(o=a,0===xo&&Qo(oe)),o!==a?(r.substr(ko,2).toLowerCase()===$?(s=r.substr(ko,2),ko+=2):(s=a,0===xo&&Qo(se)),s!==a?e=n=[n,o,s]:(ko=e,e=a)):(ko=e,e=a)):(ko=e,e=a),e!==a?(47===r.charCodeAt(ko)?(n=f,ko++):(n=a,0===xo&&Qo(ft)),n!==a?($r.test(r.charAt(ko))?(o=r.charAt(ko),ko++):(o=a,0===xo&&Qo(vt)),o===a&&(o=null),s=Ho(),Lo=t,t=Dn()):(ko=t,t=a)):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s;return t=ko,Ho(),e=ko,r.substr(ko,6).toLowerCase()===Z?(n=r.substr(ko,6),ko+=6):(n=a,0===xo&&Qo(ne)),n!==a?(ot.test(r.charAt(ko))?(o=r.charAt(ko),ko++):(o=a,0===xo&&Qo(oe)),o!==a?(r.substr(ko,4).toLowerCase()===rr?(s=r.substr(ko,4),ko+=4):(s=a,0===xo&&Qo(ae)),s!==a?e=n=[n,o,s]:(ko=e,e=a)):(ko=e,e=a)):(ko=e,e=a),e!==a?(47===r.charCodeAt(ko)?(n=f,ko++):(n=a,0===xo&&Qo(ft)),n!==a?($r.test(r.charAt(ko))?(o=r.charAt(ko),ko++):(o=a,0===xo&&Qo(vt)),o===a&&(o=null),s=Ho(),Lo=t,t=Gn()):(ko=t,t=a)):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s,u;return t=ko,Ho(),47===r.charCodeAt(ko)?(e=f,ko++):(e=a,0===xo&&Qo(ft)),e!==a?(n=ko,r.substr(ko,6).toLowerCase()===Z?(o=r.substr(ko,6),ko+=6):(o=a,0===xo&&Qo(ne)),o!==a?(ot.test(r.charAt(ko))?(s=r.charAt(ko),ko++):(s=a,0===xo&&Qo(oe)),s!==a?(r.substr(ko,2).toLowerCase()===$?(u=r.substr(ko,2),ko+=2):(u=a,0===xo&&Qo(se)),u!==a?n=o=[o,s,u]:(ko=n,n=a)):(ko=n,n=a)):(ko=n,n=a),n!==a?($r.test(r.charAt(ko))?(o=r.charAt(ko),ko++):(o=a,0===xo&&Qo(vt)),o===a&&(o=null),s=Ho(),Lo=t,t=Jn()):(ko=t,t=a)):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s,u;return t=ko,Ho(),47===r.charCodeAt(ko)?(e=f,ko++):(e=a,0===xo&&Qo(ft)),e!==a?(n=ko,r.substr(ko,6).toLowerCase()===Z?(o=r.substr(ko,6),ko+=6):(o=a,0===xo&&Qo(ne)),o!==a?(ot.test(r.charAt(ko))?(s=r.charAt(ko),ko++):(s=a,0===xo&&Qo(oe)),s!==a?(r.substr(ko,4).toLowerCase()===rr?(u=r.substr(ko,4),ko+=4):(u=a,0===xo&&Qo(ae)),u!==a?n=o=[o,s,u]:(ko=n,n=a)):(ko=n,n=a)):(ko=n,n=a),n!==a?($r.test(r.charAt(ko))?(o=r.charAt(ko),ko++):(o=a,0===xo&&Qo(vt)),o===a&&(o=null),s=Ho(),Lo=t,t=Un()):(ko=t,t=a)):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s;return t=ko,Ho(),e=ko,r.substr(ko,6).toLowerCase()===Z?(n=r.substr(ko,6),ko+=6):(n=a,0===xo&&Qo(ne)),n!==a?(ot.test(r.charAt(ko))?(o=r.charAt(ko),ko++):(o=a,0===xo&&Qo(oe)),o!==a?(r.substr(ko,2).toLowerCase()===$?(s=r.substr(ko,2),ko+=2):(s=a,0===xo&&Qo(se)),s!==a?e=n=[n,o,s]:(ko=e,e=a)):(ko=e,e=a)):(ko=e,e=a),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),o=Ho(),Lo=t,t=Bn()):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s;return t=ko,Ho(),e=ko,r.substr(ko,6).toLowerCase()===Z?(n=r.substr(ko,6),ko+=6):(n=a,0===xo&&Qo(ne)),n!==a?(ot.test(r.charAt(ko))?(o=r.charAt(ko),ko++):(o=a,0===xo&&Qo(oe)),o!==a?(r.substr(ko,4).toLowerCase()===rr?(s=r.substr(ko,4),ko+=4):(s=a,0===xo&&Qo(ae)),s!==a?e=n=[n,o,s]:(ko=e,e=a)):(ko=e,e=a)):(ko=e,e=a),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),o=Ho(),Lo=t,t=Tn()):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=ko,Ho(),r.substr(ko,20).toLowerCase()===b?(e=r.substr(ko,20),ko+=20):(e=a,0===xo&&Qo(bt)),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),Lo=t,t=An()):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=ko,Ho(),r.substr(ko,21).toLowerCase()===p?(e=r.substr(ko,21),ko+=21):(e=a,0===xo&&Qo(dt)),e===a&&(r.substr(ko,15).toLowerCase()===d?(e=r.substr(ko,15),ko+=15):(e=a,0===xo&&Qo(gt)),e===a&&(r.substr(ko,3).toLowerCase()===g?(e=r.substr(ko,3),ko+=3):(e=a,0===xo&&Qo(mt)),e===a&&(r.substr(ko,2).toLowerCase()===m?(e=r.substr(ko,2),ko+=2):(e=a,0===xo&&Qo(At)),e===a&&(r.substr(ko,9).toLowerCase()===A?(e=r.substr(ko,9),ko+=9):(e=a,0===xo&&Qo(wt)),e===a&&(r.substr(ko,4).toLowerCase()===w?(e=r.substr(ko,4),ko+=4):(e=a,0===xo&&Qo(yt))))))),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),Lo=t,t=yn()):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=ko,Ho(),r.substr(ko,21).toLowerCase()===v?(e=r.substr(ko,21),ko+=21):(e=a,0===xo&&Qo(pt)),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),Lo=t,t=wn()):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s,u,c,i,l,h;return t=ko,Ho(),(e=Po())!==a&&(n=Do())!==a?(o=Ko(),s=_o(),47===r.charCodeAt(ko)?(u=f,ko++):(u=a,0===xo&&Qo(ft)),u!==a?((c=Po())===a&&(c=null),(i=Do())===a&&(i=null),l=Ko(),h=_o(),zo(),Lo=t,t=gn(e,n,o,s,c,i,l,h)):(ko=t,t=a)):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s,u,c,i,f,b;return t=ko,Ho(),(e=Po())!==a&&(n=Do())!==a?(o=Ko(),s=_o(),r.substr(ko,2)===l?(u=l,ko+=2):(u=a,0===xo&&Qo(lt)),u===a&&(r.substr(ko,4)===h?(u=h,ko+=4):(u=a,0===xo&&Qo(ht))),u!==a?((c=Po())===a&&(c=null),(i=Do())===a&&(i=null),f=Ko(),b=_o(),zo(),Lo=t,t=mn(e,n,o,s,c,i,f,b)):(ko=t,t=a)):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=ko,Ho(),r.substr(ko,8).toLowerCase()===k?(e=r.substr(ko,8),ko+=8):(e=a,0===xo&&Qo(Ot)),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),Ho(),Lo=t,t=kn()):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=ko,Ho(),r.substr(ko,7).toLowerCase()===L?(e=r.substr(ko,7),ko+=7):(e=a,0===xo&&Qo(It)),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),Ho(),Lo=t,t=Ln()):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=ko,Ho(),r.substr(ko,7).toLowerCase()===O?(e=r.substr(ko,7),ko+=7):(e=a,0===xo&&Qo(Rt)),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),Ho(),Lo=t,t=On()):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=ko,Ho(),r.substr(ko,7).toLowerCase()===I?(e=r.substr(ko,7),ko+=7):(e=a,0===xo&&Qo(xt)),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),Ho(),Lo=t,t=In()):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=ko,Ho(),r.substr(ko,9).toLowerCase()===Q?(e=r.substr(ko,9),ko+=9):(e=a,0===xo&&Qo(Nt)),e===a&&(r.substr(ko,12).toLowerCase()===M?(e=r.substr(ko,12),ko+=12):(e=a,0===xo&&Qo(Pt))),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),Ho(),Lo=t,t=Sn()):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=ko,Ho(),r.substr(ko,5).toLowerCase()===V?(e=r.substr(ko,5),ko+=5):(e=a,0===xo&&Qo(Qt)),e===a&&(r.substr(ko,6).toLowerCase()===F?(e=r.substr(ko,6),ko+=6):(e=a,0===xo&&Qo(Mt))),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),Ho(),Lo=t,t=En()):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=ko,Ho(),r.substr(ko,5).toLowerCase()===E?(e=r.substr(ko,5),ko+=5):(e=a,0===xo&&Qo(jt)),e===a&&(r.substr(ko,6).toLowerCase()===S?(e=r.substr(ko,6),ko+=6):(e=a,0===xo&&Qo(Vt)),e===a&&(r.substr(ko,10).toLowerCase()===j?(e=r.substr(ko,10),ko+=10):(e=a,0===xo&&Qo(Ft)))),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),Ho(),Lo=t,t=xn()):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=ko,Ho(),r.substr(ko,13).toLowerCase()===R?(e=r.substr(ko,13),ko+=13):(e=a,0===xo&&Qo(Et)),e===a&&(r.substr(ko,5).toLowerCase()===x?(e=r.substr(ko,5),ko+=5):(e=a,0===xo&&Qo(St))),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),Ho(),Lo=t,t=Rn()):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=ko,Ho(),r.substr(ko,7).toLowerCase()===N?(e=r.substr(ko,7),ko+=7):(e=a,0===xo&&Qo(qt)),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),Ho(),Lo=t,t=jn()):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=ko,Ho(),r.substr(ko,12).toLowerCase()===P?(e=r.substr(ko,12),ko+=12):(e=a,0===xo&&Qo(Bt)),e===a&&(r.substr(ko,15).toLowerCase()===q?(e=r.substr(ko,15),ko+=15):(e=a,0===xo&&Qo(Dt)),e===a&&(r.substr(ko,14).toLowerCase()===B?(e=r.substr(ko,14),ko+=14):(e=a,0===xo&&Qo(Jt)))),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),Ho(),Lo=t,t=Vn()):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=ko,Ho(),r.substr(ko,6).toLowerCase()===K?(e=r.substr(ko,6),ko+=6):(e=a,0===xo&&Qo(Xt)),e===a&&(r.substr(ko,6).toLowerCase()===_?(e=r.substr(ko,6),ko+=6):(e=a,0===xo&&Qo(Yt)),e===a&&(r.substr(ko,8).toLowerCase()===H?(e=r.substr(ko,8),ko+=8):(e=a,0===xo&&Qo(Zt)),e===a&&(r.substr(ko,6).toLowerCase()===z?(e=r.substr(ko,6),ko+=6):(e=a,0===xo&&Qo($t)),e===a&&(r.substr(ko,10).toLowerCase()===W?(e=r.substr(ko,10),ko+=10):(e=a,0===xo&&Qo(re)),e===a&&(r.substr(ko,7).toLowerCase()===X?(e=r.substr(ko,7),ko+=7):(e=a,0===xo&&Qo(te)),e===a&&(r.substr(ko,7).toLowerCase()===Y?(e=r.substr(ko,7),ko+=7):(e=a,0===xo&&Qo(ee)))))))),e!==a?($r.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(vt)),n===a&&(n=null),Ho(),Lo=t,t=qn(e)):(ko=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s;return t=ko,Ho(),r.substr(ko,3).toLowerCase()===U?(e=r.substr(ko,3),ko+=3):(e=a,0===xo&&Qo(Ht)),e!==a?(et.test(r.charAt(ko))?(n=r.charAt(ko),ko++):(n=a,0===xo&&Qo(zt)),n===a&&(n=null),o=function(){var t,e,n,o,s;if(t=ko,nt.test(r.charAt(ko))?(e=r.charAt(ko),ko++):(e=a,0===xo&&Qo(Wt)),e!==a){for(n=[],o=qo();o!==a;)n.push(o),o=qo();for(o=[],s=Bo();s!==a;)o.push(s),s=Bo();Lo=t,t=Pn(e,n,o)}else ko=t,t=a;return t}(),o!==a?($r.test(r.charAt(ko))?(s=r.charAt(ko),ko++):(s=a,0===xo&&Qo(vt)),s===a&&(s=null),Ho(),Lo=t,t=Nn(o)):(ko=t,t=a)):(ko=t,t=a),t}())===a&&(t=function(){var r,t,e,n,o;return r=ko,Ho(),(t=Po())!==a&&(e=Do())!==a?(n=Ko(),o=_o(),zo(),Lo=r,r=dn(t,e,n,o)):(ko=r,r=a),r}())===a&&(t=function(){var t,e;return t=ko,Ho(),124===r.charCodeAt(ko)?(e=T,ko++):(e=a,0===xo&&Qo(Kt)),e!==a?(Ho(),Lo=t,t=Qn()):(ko=t,t=a),t}()),t}function Po(){var t;return(t=function(){var t,e,n,o,s;if(t=ko,nt.test(r.charAt(ko))?(e=r.charAt(ko),ko++):(e=a,0===xo&&Qo(Wt)),e!==a){for(n=[],o=qo();o!==a;)n.push(o),o=qo();for(o=[],s=Bo();s!==a;)o.push(s),s=Bo();Lo=t,t=Kn(e,n,o)}else ko=t,t=a;return t}())===a&&(t=function(){var t,e,n,o;for(t=ko,e=[],n=qo();n!==a;)e.push(n),n=qo();for(n=[],o=Bo();o!==a;)n.push(o),o=Bo();return r.substr(ko,3)===tr?(o=tr,ko+=3):(o=a,0===xo&&Qo(ue)),o===a&&(r.substr(ko,3)===er?(o=er,ko+=3):(o=a,0===xo&&Qo(ce)),o===a&&(r.substr(ko,2)===nr?(o=nr,ko+=2):(o=a,0===xo&&Qo(ie)),o===a&&(r.substr(ko,2)===or?(o=or,ko+=2):(o=a,0===xo&&Qo(fe)),o===a&&(r.substr(ko,2)===sr?(o=sr,ko+=2):(o=a,0===xo&&Qo(le)),o===a&&(86===r.charCodeAt(ko)?(o=ar,ko++):(o=a,0===xo&&Qo(he)),o===a&&(73===r.charCodeAt(ko)?(o=ur,ko++):(o=a,0===xo&&Qo(be)))))))),o!==a?(Lo=t,t=_n(e,n,o)):(ko=t,t=a),t}()),t}function qo(){var t,e;return t=ko,st.test(r.charAt(ko))?(e=r.charAt(ko),ko++):(e=a,0===xo&&Qo(ve)),e!==a&&(Lo=t,e=Hn()),e}function Bo(){var t,e;return t=ko,at.test(r.charAt(ko))?(e=r.charAt(ko),ko++):(e=a,0===xo&&Qo(pe)),e!==a&&(Lo=t,e=zn()),e}function Do(){var t,e,n,o,s;if(t=ko,e=ko,n=function(){var t,e;return t=ko,r.substr(ko,4).toLowerCase()===dr?(e=r.substr(ko,4),ko+=4):(e=a,0===xo&&Qo(Le)),e===a&&(r.substr(ko,2)===gr?(e=gr,ko+=2):(e=a,0===xo&&Qo(Oe)),e===a&&(r.substr(ko,2)===mr?(e=mr,ko+=2):(e=a,0===xo&&Qo(Ie)))),e!==a&&(Lo=t,e=to()),t=e}(),n===a&&(n=function(){var t,e;return t=ko,r.substr(ko,4).toLowerCase()===fr?(e=r.substr(ko,4),ko+=4):(e=a,0===xo&&Qo(me)),e===a&&(r.substr(ko,2)===lr?(e=lr,ko+=2):(e=a,0===xo&&Qo(Ae)),e===a&&(9651===r.charCodeAt(ko)?(e=hr,ko++):(e=a,0===xo&&Qo(we)))),e!==a&&(Lo=t,e=Zn()),t=e}(),n===a&&(n=function(){var t,e;return t=ko,r.substr(ko,3).toLowerCase()===cr?(e=r.substr(ko,3),ko+=3):(e=a,0===xo&&Qo(de)),e!==a&&(Lo=t,e=Xn()),t=e}(),n===a&&(n=function(){var t,e;return t=ko,r.substr(ko,3).toLowerCase()===br?(e=r.substr(ko,3),ko+=3):(e=a,0===xo&&Qo(ye)),e!==a&&(Lo=t,e=$n()),t=e}(),n===a&&(n=function(){var t,e;return t=ko,r.substr(ko,5)===Rr?(e=Rr,ko+=5):(e=a,0===xo&&Qo(Me)),e!==a&&(Lo=t,e=fo()),t=e}(),n===a&&(n=function(){var t,e;return t=ko,r.substr(ko,5)===Ir?(e=Ir,ko+=5):(e=a,0===xo&&Qo(Qe)),e!==a&&(Lo=t,e=io()),t=e}(),n===a&&(n=function(){var t,e;return t=ko,r.substr(ko,4)===Or?(e=Or,ko+=4):(e=a,0===xo&&Qo(Fe)),e!==a&&(Lo=t,e=co()),t=e}(),n===a&&(n=function(){var t,e;return t=ko,r.substr(ko,4)===Lr?(e=Lr,ko+=4):(e=a,0===xo&&Qo(Ve)),e!==a&&(Lo=t,e=uo()),t=e}(),n===a&&(n=function(){var t,e;return t=ko,r.substr(ko,3)===xr?(e=xr,ko+=3):(e=a,0===xo&&Qo(Ne)),e!==a&&(Lo=t,e=lo()),t=e}(),n===a&&(n=function(){var t,e;return t=ko,r.substr(ko,3)===Er?(e=Er,ko+=3):(e=a,0===xo&&Qo(Pe)),e!==a&&(Lo=t,e=ho()),t=e}(),n===a&&(n=function(){var t,e;return t=ko,r.substr(ko,2)===kr?(e=kr,ko+=2):(e=a,0===xo&&Qo(je)),e!==a&&(Lo=t,e=ao()),t=e}(),n===a&&(n=function(){var t,e;return t=ko,r.substr(ko,2)===Cr?(e=Cr,ko+=2):(e=a,0===xo&&Qo(Se)),e!==a&&(Lo=t,e=so()),t=e}(),n===a&&(n=function(){var t,e;return t=ko,57===r.charCodeAt(ko)?(e=yr,ko++):(e=a,0===xo&&Qo(Ee)),e!==a&&(Lo=t,e=oo()),t=e}(),n===a&&(n=function(){var t,e;return t=ko,55===r.charCodeAt(ko)?(e=wr,ko++):(e=a,0===xo&&Qo(xe)),e!==a&&(Lo=t,e=no()),t=e}(),n===a&&(n=function(){var t,e;return t=ko,54===r.charCodeAt(ko)?(e=Ar,ko++):(e=a,0===xo&&Qo(Re)),e!==a&&(Lo=t,e=eo()),t=e}(),n===a&&(n=function(){var t,e;return t=ko,109===r.charCodeAt(ko)?(e=vr,ko++):(e=a,0===xo&&Qo(Ce)),e===a&&(45===r.charCodeAt(ko)?(e=pr,ko++):(e=a,0===xo&&Qo(ke))),e!==a&&(Lo=t,e=ro()),t=e}(),n===a&&(n=function(){var t,e;return t=ko,77===r.charCodeAt(ko)?(e=ir,ko++):(e=a,0===xo&&Qo(ge)),e===a&&(e=""),e!==a&&(Lo=t,e=Yn()),t=e}())))))))))))))))),n!==a){for(o=[],(s=Go())===a&&(s=Uo())===a&&(s=Jo())===a&&(s=To());s!==a;)o.push(s),(s=Go())===a&&(s=Uo())===a&&(s=Jo())===a&&(s=To());e=n=[n,o]}else ko=e,e=a;return e!==a&&(Lo=t,e=Wn(e)),e}function Jo(){var t,e;return t=ko,r.substr(ko,4)===Sr?(e=Sr,ko+=4):(e=a,0===xo&&Qo(qe)),e===a&&(r.substr(ko,4)===jr?(e=jr,ko+=4):(e=a,0===xo&&Qo(Be))),e!==a&&(Lo=t,e=bo()),e}function To(){var t,e;return t=ko,r.substr(ko,4)===Vr?(e=Vr,ko+=4):(e=a,0===xo&&Qo(De)),e===a&&(r.substr(ko,4)===Fr?(e=Fr,ko+=4):(e=a,0===xo&&Qo(Je))),e!==a&&(Lo=t,e=vo()),e}function Go(){var t,e,n,o,s;return t=ko,40===r.charCodeAt(ko)?(e=Qr,ko++):(e=a,0===xo&&Qo(Te)),e===a&&(e=null),r.substr(ko,4)===Mr?(n=Mr,ko+=4):(n=a,0===xo&&Qo(Ge)),n===a&&(111===r.charCodeAt(ko)?(n=Nr,ko++):(n=a,0===xo&&Qo(Ue))),n!==a?(ut.test(r.charAt(ko))?(o=r.charAt(ko),ko++):(o=a,0===xo&&Qo(Ke)),o!==a?(41===r.charCodeAt(ko)?(s=Pr,ko++):(s=a,0===xo&&Qo(_e)),s===a&&(s=null),Lo=t,t=po(o)):(ko=t,t=a)):(ko=t,t=a),t}function Uo(){var t,e,n,o,s;if(t=ko,40===r.charCodeAt(ko)?(e=Qr,ko++):(e=a,0===xo&&Qo(Te)),e===a&&(e=null),r.substr(ko,3)===qr?(n=qr,ko+=3):(n=a,0===xo&&Qo(He)),n!==a){if(o=[],tt.test(r.charAt(ko))?(s=r.charAt(ko),ko++):(s=a,0===xo&&Qo(Ut)),s!==a)for(;s!==a;)o.push(s),tt.test(r.charAt(ko))?(s=r.charAt(ko),ko++):(s=a,0===xo&&Qo(Ut));else o=a;o!==a?(41===r.charCodeAt(ko)?(s=Pr,ko++):(s=a,0===xo&&Qo(_e)),s===a&&(s=null),Lo=t,t=go(o)):(ko=t,t=a)}else ko=t,t=a;return t}function Ko(){var t,e,n,o;return t=ko,e=ko,94===r.charCodeAt(ko)?(n=Br,ko++):(n=a,0===xo&&Qo(ze)),n!==a?(ct.test(r.charAt(ko))?(o=r.charAt(ko),ko++):(o=a,0===xo&&Qo(We)),o!==a?e=n=[n,o]:(ko=e,e=a)):(ko=e,e=a),e===a&&(e=null),Lo=t,mo()}function _o(){var t,e,n,o;for(t=ko,e=[],39===r.charCodeAt(ko)?(n=Dr,ko++):(n=a,0===xo&&Qo(Xe));n!==a;)e.push(n),39===r.charCodeAt(ko)?(n=Dr,ko++):(n=a,0===xo&&Qo(Xe));for(n=[],44===r.charCodeAt(ko)?(o=Jr,ko++):(o=a,0===xo&&Qo(Ye));o!==a;)n.push(o),44===r.charCodeAt(ko)?(o=Jr,ko++):(o=a,0===xo&&Qo(Ye));return Lo=t,Ao(e,n)}function Ho(){var t,e;for(xo++,t=[],it.test(r.charAt(ko))?(e=r.charAt(ko),ko++):(e=a,0===xo&&Qo($e));e!==a;)t.push(e),it.test(r.charAt(ko))?(e=r.charAt(ko),ko++):(e=a,0===xo&&Qo($e));return xo--,e=a,0===xo&&Qo(Ze),t}function zo(){var t,e,n,o;for(xo++,t=[],r.substr(ko,3)===Tr?(e=Tr,ko+=3):(e=a,0===xo&&Qo(tn)),e===a&&(e=ko,n=Ho(),8594===r.charCodeAt(ko)?(o=Gr,ko++):(o=a,0===xo&&Qo(en)),o!==a?e=n=[n,o,Ho()]:(ko=e,e=a));e!==a;)t.push(e),r.substr(ko,3)===Tr?(e=Tr,ko+=3):(e=a,0===xo&&Qo(tn)),e===a&&(e=ko,n=Ho(),8594===r.charCodeAt(ko)?(o=Gr,ko++):(o=a,0===xo&&Qo(en)),o!==a?e=n=[n,o,Ho()]:(ko=e,e=a));return xo--,e=a,0===xo&&Qo(rn),t}let Wo=0,Xo="ionian";if((s=i())!==a&&ko===r.length)return s;throw s!==a&&ko<r.length&&Qo({type:"end"}),Yo=Ro,Zo=Io<r.length?r.charAt(Io):null,$o=Io<r.length?Fo(Io,Io+1):Fo(Io,Io),new n(n.buildMessage(Yo,Zo),Yo,Zo,$o);var Yo,Zo,$o}}}},t={};function e(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return r[n](s,s.exports,e),s.exports}e.d=(r,t)=>{for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},e.o=(r,t)=>Object.prototype.hasOwnProperty.call(r,t),e.r=r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var n={};return(()=>{e.r(n),e.d(n,{chord2mml:()=>w});var r=e(699);function t(r,t,e){for(var n=t.length*e,o=0,s=t;o<s.length;o++)r[s[o]].noteLength=n;return r}var o=function(r,t,e){if(e||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return r.concat(n||Array.prototype.slice.call(t))};function s(r){return delete r.event,delete r.root,delete r.quality,delete r.inversion,delete r.octaveOffset,delete r.upperRoot,delete r.upperQuality,delete r.upperInversion,delete r.upperOctaveOffset,delete r.lowerRoot,delete r.lowerQuality,delete r.lowerInversion,delete r.lowerOctaveOffset,r}function a(r,t,e,n,o){var s=h(r,t);return p(s=v(s,e,n),12*o)}function u(r,t,e,n,o,s,a){var u=[e],f=h(r,t),l=c(f=i(f=v(f,n,o),u),s,u,a);return p(l,-12)}function c(r,t,e,n){if(e=p(e,12*n),(r=p(r,12*t))[0]<=e[e.length-1])throw new Error("ERROR : lowerとupperが衝突しました lowerNotes:".concat(e," upperNotes:").concat(r));var s=[];return s.push.apply(s,o(o([],e,!1),r,!1)),s}function i(r,t){for(;r[0]<=t[t.length-1];)r=p(r,12);return r}function f(r,t,e,n,o){if("root"==n){var s=[r],a=h(r,t);return p(c(a=d(a,e),o,s,o),-12)}return d(p(h(r,t),12*o),e)}function l(r,t,e,n,o,s,a,u){var f=h(r,t),l=h(n,o),b=c(f=i(f=v(f,e,""),l=v(l,s,"")),a,l,u);return p(b,-12)}function h(r,t){var e=t.split(","),n=[];switch(e[0]){case"maj":n=[0,4,7];break;case"maj7":n=[0,4,7,11];break;case"min":n=[0,3,7];break;case"min7":n=[0,3,7,10];break;case"sus2":n=[0,2,7];break;case"sus4":n=[0,5,7];break;case"7sus2":n=[0,2,7,10];break;case"7sus4":n=[0,5,7,10];break;case"dim triad":n=[0,3,6];break;case"aug":n=[0,4,8];break;case"6":n=[0,4,7,9];break;case"7":n=[0,4,7,10];break;case"9":n=[0,4,7,10,14];break;case"11":n=[0,4,7,10,14,17];break;case"13":n=[0,4,7,10,14,17,21]}for(var o=0,s=e;o<s.length;o++)switch(s[o]){case"omit1":n=n.filter((function(r){return 0!==r}));break;case"omit3":n=n.filter((function(r){return![3,4].includes(r)}));break;case"omit5":n=n.filter((function(r){return 7!==r}));break;case"add2":n=b(n,2);break;case"add9":n=b(n,14);break;case"add4":n=b(n,5);break;case"add11":n=b(n,17);break;case"add6":n=b(n,9);break;case"add13":n=b(n,21);break;case"flatted fifth":n=n.map((function(r){return 7===r?6:r}));break;case"augmented fifth":n=n.map((function(r){return 7===r?8:r}))}return p(n,r)}function b(r,t){return r.includes(t)||(r.push(t),r.sort((function(r,t){return r-t}))),r}function v(r,t,e){switch(t){case"1st inv":r=g(r,1);break;case"2nd inv":r=g(r,2);break;case"3rd inv":r=g(r,3)}switch(e){case"drop2":r=function(r){if(r.length<2)return r;var t=r[r.length-2]-12;return r.splice(r.length-2,1),r.unshift(t),r}(r);break;case"drop4":r=function(r){if(r.length<4)return r;var t=r[r.length-4]-12;return r.splice(r.length-4,1),r.unshift(t),r}(r);break;case"drop2and4":r=function(r){if(r.length<4)return r;var t=r[r.length-2]-12,e=r[r.length-4]-12;return r.splice(r.length-2,1),r.splice(r.length-4+1,1),r.unshift(t),r.unshift(e),r}(r)}return r}function p(r,t){for(var e=0;e<r.length;e++)r[e]+=t;return r}function d(r,t){for(var e=!1,n=0,o=r;n<o.length;n++){if(o[n],(r[0]%12+12)%12==(t%12+12)%12){e=!0;break}r.push(r.shift())}if(e)return m(r);throw new Error("ERROR : ".concat(JSON.stringify(r)," を転回しようとしましたが、chordに ").concat(JSON.stringify(t)," が含まれていません。chordに含まれるnoteを指定してください。"))}function g(r,t){for(var e=0;e<t;e++)r.push(r.shift());return m(r)}function m(r){for(var t=-128,e=0;e<r.length;e++){for(var n=-128;n<128&&!(r[e]>t);n+=12)r[e]+=12;t=r[e]}return r}function A(r,t,e){var n=function(r,t,e){for(var n=t.map((function(t){return t+r})).map((function(r){return r%12})).sort((function(r,t){return r-t})),o=0;o<e.length;o++)if(JSON.stringify(e[o])===JSON.stringify(n))return o;throw new Error("ERROR : isSharpByKeyAndScale searchIonians")}(r,t,e);switch(n){case 0:case 2:case 4:case 7:case 9:case 11:return!0;case 1:case 3:case 5:case 6:case 8:case 10:return!1;default:throw new Error("ERROR : isSharpByKeyAndScale")}}var w={parse:r.parse};w.parse=function(e){var n=(0,r.parse)(e);return function(r){for(var t=function(r){for(var t=[],e=function(e){var n=r.map((function(r){return(r+e)%12}));t.push(n)},n=0;n<12;n++)e(n);return t}([0,2,4,5,7,9,11]).map((function(r){return r.sort((function(r,t){return r-t}))})),e="",n={event:"key",root:"C",sharpLength:0,flatLength:0,offset:0},o={event:"scale",offsets:[0,2,4,5,7,9,11]},s=A(n.offset,o.offsets,t),a=0,u=r;a<u.length;a++){var c=u[a];switch(c.event){case"inline mml":e+=c.mml;continue;case"bar":e+="/*|*/";continue;case"key":s=A((n=c).offset,o.offsets,t);continue;case"scale":o=c,s=A(n.offset,o.offsets,t);continue}var i=c.notes;if(i){var f=0;i.length&&(e+="'");for(var l=i[0];l<0;)l+=12,e+=">",f--;for(var h=0;h<i.length;h++){for(var b=i[h],v=Math.floor(b/12);v>f;)e+="<",f++;if(s)switch((b%12+12)%12){case 0:e+="c";break;case 1:e+="c+";break;case 2:e+="d";break;case 3:e+="d+";break;case 4:e+="e";break;case 5:e+="f";break;case 6:e+="f+";break;case 7:e+="g";break;case 8:e+="g+";break;case 9:e+="a";break;case 10:e+="a+";break;case 11:e+="b"}else switch((b%12+12)%12){case 0:e+="c";break;case 1:e+="d-";break;case 2:e+="d";break;case 3:e+="e-";break;case 4:e+="e";break;case 5:e+="f";break;case 6:e+="g-";break;case 7:e+="g";break;case 8:e+="a-";break;case 9:e+="a";break;case 10:e+="b-";break;case 11:e+="b"}!h&&c.noteLength&&(e+=c.noteLength)}i.length&&(e+="'")}}return e}(function(r){for(var t,e,n,o,c=[],i="root inv",h="close",b="no bass",v=0,p=0,d=0,g=r;d<g.length;d++){var m=g[d];switch(m.event){case"chord":m.notes=a(m.root,m.quality,null!==(t=m.inversion)&&void 0!==t?t:i,h,v+m.octaveOffset),m=s(m),c.push(m);break;case"chord over bass note":m.notes=u(m.upperRoot,m.upperQuality,m.lowerRoot,null!==(e=m.upperInversion)&&void 0!==e?e:i,h,v+m.upperOctaveOffset,p+m.lowerOctaveOffset),m=s(m),c.push(m);break;case"inversion":m.notes=f(m.upperRoot,m.upperQuality,m.lowerRoot,b,v+m.upperOctaveOffset),m=s(m),c.push(m);break;case"polychord":m.notes=l(m.upperRoot,m.upperQuality,null!==(n=m.upperInversion)&&void 0!==n?n:i,m.lowerRoot,m.lowerQuality,null!==(o=m.lowerInversion)&&void 0!==o?o:i,v+m.upperOctaveOffset,p+m.lowerOctaveOffset),m=s(m),c.push(m);break;case"change inversion mode to root inv":i="root inv";break;case"change inversion mode to 1st inv":i="1st inv";break;case"change inversion mode to 2nd inv":i="2nd inv";break;case"change inversion mode to 3rd inv":i="3rd inv";break;case"change open harmony mode to close":h="close";break;case"change open harmony mode to drop2":h="drop2";break;case"change open harmony mode to drop4":h="drop4";break;case"change open harmony mode to drop2and4":h="drop2and4";break;case"change bass play mode to root":b="root";break;case"change bass play mode to no bass":b="no bass";break;case"octave up":v++,p++;break;case"octave up upper":v++;break;case"octave up lower":p++;break;case"octave down":v--,p--;break;case"octave down upper":v--;break;case"octave down lower":p--;break;default:c.push(m)}}return c}(n=function(r){for(var e="chord over bass note",n="no bass",o=0,s=r;o<s.length;o++){var a=s[o];switch(a.event){case"change slash chord mode to chord over bass note":e="chord over bass note";break;case"change slash chord mode to inversion":e="inversion";break;case"change slash chord mode to polychord":e="polychord";break;case"slash chord":a.event=e;break;case"change bass play mode to root":n="root";break;case"change bass play mode to no bass":n="no bass";break;case"chord":"root"==n&&(a.event="chord over bass note",a.upperRoot=a.root,a.upperQuality=a.quality,a.upperInversion=a.inversion,a.upperOctaveOffset=a.octaveOffset,a.lowerRoot=a.root,a.lowerQuality=a.quality,a.lowerInversion=a.inversion,a.lowerOctaveOffset=a.octaveOffset,delete a.root,delete a.quality,delete a.inversion,delete a.octaveOffset)}}return r=function(r){for(var e=0,n=1,o=[],s=0;s<r.length;s++){var a=r[s];switch(a.event){case"chord":case"chord over bass note":case"inversion":case"polychord":a.noteLength=1,o.push(s);break;case"bar":e++,r=t(r,o,n),o=[],n=1;break;case"bar slash":e++,r=t(r,o,n=2),o=[]}}return e&&(r=t(r,o,n)),r}(r),r}(n)))}})(),n})()));